# VDR313. Scope variables should not be left unused
All defined variables have to be used.

If you need to have an unused variable (e.g., context logs), the variable has to start with an underscore (`_`).

### ❌ Anti-pattern
```python
class Scenario(vedro.Scenario):
    subject = "login as registered user"
    
    def given_phone(self):
        self.phone = fake(UserPhoneShema)  # The variable is unused, it makes no sense

    def given_user(self):
        self.user = fake(NewUserSchema)
    
    def given_registered_user(self):
        registered_user(self.user)    

    def when_user_logins(self):
        self.response = httpx.post(f"{API_URL}/auth/login", json=self.user)

    def then_it_should_return_success_status_code(self):
        assert self.response.status_code == 200
```
### ✅ Best practice
```python
class Scenario(vedro.Scenario):
    subject = "login as registered user"
    
    def given_user(self):
        self.user = fake(NewUserSchema)
    
    def given_registered_user(self):
        self._register_data = registered_user(self.user)  # Save logs if needed

    def when_user_logins(self):
        self.response = httpx.post(f"{API_URL}/auth/login", json=self.user)

    def then_it_should_return_success_status_code(self):
        assert self.response.status_code == 200
```

### ⚠️ Exception

In most cases, context manager variables are created for storing logs (`with ... as logs`) and not used in test steps directly. For this reason, the linter ignores the context manager variables by default. 

```python
class Scenario(vedro.Scenario):
    subject = "login as registered user via facebook"
    
    def given_user(self):
        self.user = fake(NewUserSchema)
    
    def given_registered_user(self):
        registered_user(self.user)    

    def when_user_logins(self):
        with mocked_facebook_user(self.user) as self.facebook_history:  # Not a mistake
            self.response = httpx.post(f"{API_URL}/auth/login", json=self.user)

    def then_it_should_return_success_status_code(self):
        assert self.response.status_code == 200
```

If you need to treat this as a mistake, you can configure this in the `setup.cfg` file using the parameter `allow_unused_with_block_attributes=False`.
